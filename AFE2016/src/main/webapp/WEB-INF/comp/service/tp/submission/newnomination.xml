<?xml version="1.0" encoding="UTF-8"?>
<service
	dbAccessType="readWrite"
	description=""
	executeInBackground="true"
	moduleName="submission"
	name="newnomination"
	xmlns="http://www.simplity.org/schema"
>
<inputData attachmentFields="filekey">
<inputFields>				
	<inputField dataType="_text" name="filekey"/>
	<inputField dataType="_text" name="filename"/>
	<inputField dataType="_text" name="filetype"/>
	<inputField dataType="_text" name="filesize"/>
	<inputField dataType="_text" name="selectedCategory"/>
	<inputField dataType="_text" name="selectedLevel"/>
	<inputField dataType="_text" name="nomination"/>
	<inputField dataType="_text" name="sponsorMailNickname"/>
	<inputField dataType="_text" name="sponsorMail"/>
	<inputField dataType="_text" name="submitterMailNickname"/>
	<inputField dataType="_text" name="submitterMail"/>
	<inputField dataType="_text" name="sponsorname"/>
	<inputField dataType="_text" name="sponsornumber"/>
	<inputField dataType="_text" name="status"/>
	<inputField dataType="_boolean" name="email"/>
</inputFields>
<inputRecords>
	<inputRecord recordName="nomination.members" sheetName="members"/>
</inputRecords>
</inputData>	
	<actions>			
		<setValue fieldName="submitterMail" expression="lowercase(submitterMail)"></setValue>	
		<setValue fieldName="submitterMailNickname" expression="lowercase(submitterMailNickname)"></setValue>
		<setValue fieldName="sponsorMail" expression="lowercase(sponsorMail)"></setValue>
		<setValue fieldName="sponsorMailNickname" expression="lowercase(sponsorMailNickname)"></setValue>
		<save saveAction="save" recordName="nomination.nomination">
			<childRecords>
				<relatedRecord sheetName="members" recordName="nomination.members"/>
			</childRecords>
		</save>
		<subService serviceName="submission.mailer" executeOnCondition="email"/>
	</actions>
	
</service>