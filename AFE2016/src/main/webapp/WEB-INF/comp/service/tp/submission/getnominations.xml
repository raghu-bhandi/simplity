<?xml version="1.0" encoding="UTF-8"?>
<service
	dbAccessType="readOnly"
	description=""
	executeInBackground="true"
	moduleName="submission"
	name="getnominations"
	xmlns="http://www.simplity.org/schema">
	<actions>
		<copyUserId fieldName="copyuserid" actionName="copyUserIdAction" description="Copy user id from context"/>	
		<setValue fieldName="userId" expression="lowercase(copyuserid)"></setValue>	
		<createSheet sheetName="filtersheet" data="submitterMail;$userId"/>
		<filter
			inputSheetName="filtersheet"
			filterRecordName="nomination.nomination"
			outputSheetName="nominations"> 
			<childRecords>
				<relatedRecord sheetName="members" recordName="nomination.members"/>
			</childRecords>
		</filter>
		<log names="nominations,members"/>
	</actions>
	<outputData attachmentColumns="nominations.filekey">	
		<outputRecords>
			<outputRecord sheetName="nominations"/>
			<outputRecord sheetName="members" parentSheetName="nominations" linkColumnInParentSheet="nominationId" linkColumnInThisSheet="nominationId"/>
		</outputRecords>
	</outputData>
</service>