<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<service
	xmlns="http://www.simplity.org/schema"
	moduleName="fileactions"
	name="fileProcessing"
	dbAccessType="subService" 
>
	<actions>
		<setValue fieldName="inFolderName" fieldValue="${basedir}/infile"></setValue>
		<setValue fieldName="inputfilename" fieldValue="txt01.txt"></setValue>
		<setValue fieldName="outFolderName" fieldValue="${basedir}/outfile"></setValue>
		<setValue fieldName="outFileName" fieldValue="{name}.{ext}"></setValue>

		<createSheet sheetName="collect" recordName="files.fixed"/>
		<batchProcessor
			rootFolderName="$inFolderName"
			dbAccessType="none"
			serviceOnInvalidInput="fileactions.processErrorRow"
			serviceOnErrorAtRowLevel="fileactions.processErrorRow"
		>
			<fileProcessor>
				<inputFile
					recordName="files.fixed"
					fileName="$inputfilename"
					dataFormat="fixedWidth" />
				<outputFile
					recordName="files.fixed"
					fileName="$outFileName"
					dataFormat="fixedWidth" />
				<actionBeforeChildren>
					<subService serviceName="fileactions.insertRows" />
				</actionBeforeChildren>
			</fileProcessor>
		</batchProcessor>
<!-- 
		<fileProcessor
			inFolderName="$inFolderName"
			inFileNamePattern="$inputfilename"
			inDataFormat="fixedWidth"
			inRecordName="files.fixed"
			outFolderName="$outFolderName"
			outFileName="$outFileName"
			outDataFormat="fixedWidth"
			outRecordName="files.fixed"					
		>
		<actionOnInvalidInputRow>
				<subService serviceName="fileactions.processErrorRow"/>
		</actionOnInvalidInputRow>
		<actionOnErrorWhileProcessing>
			<subService serviceName="fileactions.processErrorRow"/>
		</actionOnErrorWhileProcessing>
			<actions>
				<subService serviceName="fileactions.insertRows"/>
			</actions>
		</fileProcessor>
 -->
	</actions>
	<outputData dataSheets="collect"></outputData>
</service>