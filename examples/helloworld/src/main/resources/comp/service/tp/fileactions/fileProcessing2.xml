<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<service
	xmlns="http://www.simplity.org/schema"
	moduleName="fileactions"
	name="fileProcessing2"
	dbAccessType="subService" 
>
	<actions>
		<setValue fieldName="inFolderName" fieldValue="${basedir}/infile"></setValue>
		<setValue fieldName="inputfilename" fieldValue="txt01.txt"></setValue>
		<setValue fieldName="outFolderName" fieldValue="${basedir}/outfile"></setValue>
		<setValue fieldName="outFileName" fieldValue=""></setValue>

		<createSheet sheetName="collect" recordName="files.fixed"/>
		
		<batchProcessor
			inputFolder="$inFolderName"
			outputFolder="$outFolderName"
			dbAccessType="none"
			serviceOnInvalidInput="fileactions.processErrorRow"
			serviceOnErrorAtRowLevel="fileactions.processErrorRow"
		>
			<batchRowProcessor>
				<inputFile
					recordName="files.fixed"
					fileName="$inputfilename"
					dataFormat="fixedWidth" />
				<outputFile
					recordName="files.fixed3"
					fileName="{name}02.{ext}"
					dataFormat="fixedWidth" />
				<childProcessors>
					<batchRowProcessor>
						<inputFile 
							recordName="files.fixed2" 
							fileName="{name}associate.{ext}" 
							dataFormat="fixedWidth"/>
						<actionBeforeChildren>
						<log names="a" />
						</actionBeforeChildren>
					</batchRowProcessor>
				</childProcessors>
			</batchRowProcessor>
		</batchProcessor>
	</actions>
	<outputData dataSheets="collect"></outputData>
</service>