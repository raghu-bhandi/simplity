<?xml version="1.0" encoding="UTF-8"?>
<service name="FileInFileOut" 
		 moduleName="batchProcess"
		 dbAccessType="none"
		 xmlns="http://www.simplity.org/schema" 
		 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<actions>
		<batchProcessor dbAccessType="readOnly" 
						inputFolder="${basedir}/src/test/resources/infile"
						outputFolder="${basedir}/target"
						serviceOnErrorAtRowLevel="batchProcess.batchProcessorError"
						serviceOnInvalidInput="batchProcess.batchProcessorInvalidInput"
						>
			<batchRowProcessor>			
				<inputFile recordName="files.fixed2" fileName="batchIn.txt" dataFormat="fixedWidth"/>
				<actionBeforeChildren>
					<log names="_rowText,_lineNum"/>					
				</actionBeforeChildren>
				<childProcessors>
					<batchRowProcessor inputSql="example.selectStudent">
						<aggregators>
							<aggregator aggregationType="sum" outputFieldName="averageOut" inputFieldName="id"/>
						</aggregators>	
					<outputFile recordName="files.fixed4" fileName="batchOut.txt" dataFormat="fixedWidth"/>											
					</batchRowProcessor>
				</childProcessors>	
				<actionAfterChildren>
					<log names="averageOut"/>
				</actionAfterChildren>					
			</batchRowProcessor>		
		</batchProcessor>
	</actions>
</service>
