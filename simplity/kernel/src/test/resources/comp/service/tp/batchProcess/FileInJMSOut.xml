<?xml version="1.0" encoding="UTF-8"?>
<service name="FileInJMSOut" 
		 moduleName="batchProcess"
		 dbAccessType="none"
		 xmlns="http://www.simplity.org/schema" 
		 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<actions>
		<batchProcessor dbAccessType="readOnly" 
						jmsUsage="notManaged"
						inputFolder="${basedir}/src/test/resources/infile"
						outputFolder="${basedir}/target"
						serviceOnErrorAtRowLevel="batchProcess.batchProcessorError"
						serviceOnInvalidInput="batchProcess.batchProcessorInvalidInput"
						>
			<batchRowProcessor>			
				<inputFile recordName="files.fixed2" fileName="txt01.txt" dataFormat="fixedWidth"/>
				<actionBeforeChildren>
					<log names="_rowText,_lineNum"/>					
				</actionBeforeChildren>
				<childProcessors>
					<batchRowProcessor>
						<inputFile recordName="files.fixed" fileName="txt01associate.txt" dataFormat="fixedWidth" linkFieldsInParentRow="id2" linkFieldsInThisRow="id"/>
						<aggregators>
							<aggregator aggregationType="average" outputFieldName="averageOut" inputFieldName="id"/>
						</aggregators>	
					<outputFile recordName="files.fixed3" fileName="batchOut.txt" dataFormat="fixedWidth"/>											
					</batchRowProcessor>
				</childProcessors>	
				<actionAfterChildren>
					<log names="averageOut"/>
				</actionAfterChildren>	
				<outputQueue fieldNames="id2,name2,address2" queueName="jms/Queue02"/>				
			</batchRowProcessor>		
		</batchProcessor>
	</actions>
</service>
